<!-- app/views/projects/show.html.erb -->
<h1><%= @project.title %></h1>

<p><strong>Description:</strong> <%= @project.description %></p>
<p><strong>Budget:</strong> <%= @project.budget %></p>
<p><strong>Start Date:</strong> <%= @project.start_date %></p>
<p><strong>End Date:</strong> <%= @project.end_date %></p>

<%= link_to 'Back to Projects', user_projects_path(current_user) %>
<%= link_to 'Edit', edit_user_project_path(current_user, @project) %>

<%= simple_form_for @project, url: user_project_path(current_user, @project), method: :delete, html: { data: { confirm: 'Are you sure you want to delete this project?' } } do |f| %>
  <%= f.button :submit, 'Delete', class: 'btn btn-danger' %>
<% end %>

<% if current_user == @project.user %> <!-- Only show the share form to the project owner (company) -->
  <h3>Share this project with freelancers</h3>

  <%= form_with(url: share_project_path(@project), method: :post) do |f| %>
    <%= f.select :user_id, User.where(role: 'freelancer').pluck(:email, :id), prompt: 'Select a freelancer' %>
    <%= f.submit "Share Project" %>
  <% end %>
<% end %>
